(function(t){function e(e){for(var a,i,c=e[0],o=e[1],u=e[2],l=0,d=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},s={app:0},r=[];function c(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-2d0ab43a":"3099d8c5","chunk-2d22d746":"df81481a","chunk-67a15189":"c33d3d12","chunk-783962eb":"eb3e732c","chunk-e53edefc":"0b133713"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n={"chunk-67a15189":1,"chunk-783962eb":1,"chunk-e53edefc":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-2d0ab43a":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-67a15189":"15a3e7fa","chunk-783962eb":"733ca9d5","chunk-e53edefc":"84217706"}[t]+".css",s=o.p+a,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var u=r[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===s))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===a||l===s)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var a=e&&e.target&&e.target.src||s,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete i[t],p.parentNode.removeChild(p),n(r)},p.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){i[t]=0})));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=c(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(p);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",d.name="ChunkLoadError",d.type=a,d.request=i,n[1](d)}s[t]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var p=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1aa6":function(t,e,n){t.exports=n.p+"img/needle-ab.4b81da04.png"},"1ac5":function(t,e,n){"use strict";n("8e3d")},2022:function(t,e,n){},"2a5b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],r={name:"app",mounted:function(){if(window.localStorage.userData){var t=JSON.parse(window.localStorage.userData);this.$store.commit("USERLOGIN",t)}}},c=r,o=n("2877"),u=Object(o["a"])(c,i,s,!1,null,null,null),l=u.exports,d=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("topNav"),n("swiperCom"),n("iconList"),n("musicList"),n("playController")],1)},f=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topNav"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-liebiao2"}})]),n("div",{staticClass:"centerNav"},[n("span",{on:{click:function(e){return t.$router.push("/user")}}},[t._v("我的")]),n("span",[t._v("发现")]),n("span",[t._v("云村")]),n("span",[t._v("视频")])]),n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.$router.push("/searchview")}}},[n("use",{attrs:{"xlink:href":"#icon-sousuo"}})])])},m=[],v={name:"topNav"},g=v,y=(n("1ac5"),Object(o["a"])(g,h,m,!1,null,"fb00df92",null)),b=y.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("swiper",{ref:"mySwiper",attrs:{options:t.swiperOptions}},[t._l(t.bannerArr,(function(t,e){return n("swiper-slide",{key:e},[n("img",{attrs:{src:t.pic}})])})),n("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)},C=[],x=n("1da1"),k=(n("96cf"),n("7212")),_=(n("a7a3"),{components:{Swiper:k["Swiper"],SwiperSlide:k["SwiperSlide"]},directives:{swiper:k["directive"]},data:function(){return{swiperOptions:{pagination:{el:".swiper-pagination",clickable:!0},autoplay:!0},bannerArr:[]}},methods:{getBanner:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("banner?type=1");case 2:n=e.sent,t.bannerArr=n.data.banners;case 4:case"end":return e.stop()}}),e)})))()}},computed:{swiper:function(){return this.$refs.mySwiper.$swiper}},created:function(){this.getBanner()}}),L=_,I=(n("7fd8"),Object(o["a"])(L,w,C,!1,null,"9bb1a5be",null)),P=I.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"iconList"},[n("div",{staticClass:"iconItem"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-tubiaozhizuomoban"}})]),n("span",[t._v("每日推荐")])]),n("div",{staticClass:"iconItem"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-diantai1"}})]),n("span",[t._v("私人FM")])]),n("div",{staticClass:"iconItem"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-gedan"}})]),n("span",[t._v("歌单")])]),n("div",{staticClass:"iconItem"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-paihangbang"}})]),n("span",[t._v("排行榜")])])])},S=[],j={},$=j,E=(n("7761"),Object(o["a"])($,O,S,!1,null,"1ae55fd3",null)),N=E.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"musicList"},[t._m(0),n("div",{staticClass:"musicListItem"},[n("div",{staticClass:"swiper-container",attrs:{id:"musicSwiper"}},[n("div",{staticClass:"swiper-wrapper"},t._l(t.musicList,(function(e){return n("router-link",{key:e.id,staticClass:"swiper-slide",attrs:{to:{path:"/listview",query:{id:e.id}}}},[n("img",{attrs:{src:e.picUrl,alt:e.name}}),n("div",{staticClass:"name"},[t._v(t._s(e.name))]),n("div",{staticClass:"number"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-play"}})]),n("span",[t._v(t._s(t.formatNumber(e.playCount)))])])])})),1)])])])},R=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[t._v("发现好歌单")]),n("div",{staticClass:"more"},[t._v("查看更多")])])}],A=(n("b680"),n("b619")),M={data:function(){return{musicList:[]}},methods:{getRecMusicList:function(){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("personalized?limit=10");case 2:n=e.sent,t.musicList=n.data.result;case 4:case"end":return e.stop()}}),e)})))()},formatNumber:function(t){return t>=1e8?(t/1e8).toFixed(2)+"亿":t>=1e4?(t/1e4).toFixed(2)+"万":t}},created:function(){this.getRecMusicList()},updated:function(){new A["default"]("#musicSwiper",{slidesPerView:3,spaceBetween:30})}},U=M,D=(n("7220"),Object(o["a"])(U,T,R,!1,null,"62d40e8b",null)),B=D.exports,z=n("cf92"),F={name:"Home",components:{topNav:b,swiperCom:P,iconList:N,musicList:B,playController:z["a"]}},G=F,q=Object(o["a"])(G,p,f,!1,null,"ba79a73e",null),J=q.exports,H=(n("99af"),n("d81d"),n("ac1f"),n("1276"),n("fb6a"),n("159b"),n("2f62")),Y=n("bc3a"),K=n.n(Y);a["default"].use(H["a"]);var V=new H["a"].Store({state:{playlist:[{name:"",id:"",al:{id:"",name:"",pic:"",picUrl:"",pic_str:""},ar:[""]}],playCurrentIndex:0,lyric:"",user:{isLogin:!1,account:{},userDetail:{}}},mutations:{setPlayList:function(t,e){t.playlist=e},pushPlayList:function(t,e){t.playlist.push(e)},setPlayIndex:function(t,e){t.playCurrentIndex=e},GETLYRIC:function(t,e){t.lyric=e},USERLOGIN:function(t,e){console.log("改了islogin"),t.user=e}},actions:{getLyric:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,K.a.get("http://localhost:3000/lyric?id=".concat(e.id));case 2:a=n.sent,t.commit("GETLYRIC",a.data.lrc.lyric);case 4:case"end":return n.stop()}}),n)})))()},userLogin:function(t,e){return Object(x["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,K.a.get("/login/cellphone?phone=".concat(e.phone,"&password=").concat(e.password));case 2:if(a=n.sent,200!=a.data.code){n.next=12;break}return t.state.user.isLogin=!0,t.state.user.account=a.data.account,n.next=8,K.a.get("user/detail?uid=".concat(a.data.account.id));case 8:i=n.sent,t.state.user.userDetail=i,window.localStorage.userData=JSON.stringify(t.state.user),t.commit("USERLOGIN",t.state.user);case 12:return n.abrupt("return",a);case 13:case"end":return n.stop()}}),n)})))()}},getters:{lyricCut:function(t){var e=[{time:"",context:""}];return e=t.lyric.split(/\n/gi).map((function(t){var e=t.slice(1,3),n=t.slice(4,6),a=t.slice(7,10),i=t.slice(11,t.length),s=60*parseInt(e)+parseInt(n)+a/1e3;return{time:s,context:i}})),e.forEach((function(t,n){n+1<e.length?t.nextLyricTime=e[n+1].time:t.nextLyricTime=t.time})),e}},modules:{}});a["default"].use(d["a"]);var W=[{path:"/",name:"Home",component:J},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/listview",name:"listview",component:function(){return n.e("chunk-67a15189").then(n.bind(null,"4055"))}},{path:"/searchview",name:"searchview",component:function(){return n.e("chunk-783962eb").then(n.bind(null,"2d3b"))}},{path:"/user",name:"user",component:function(){return n.e("chunk-2d0ab43a").then(n.bind(null,"1511"))},beforeEnter:function(t,e,n){setTimeout((function(){V.state.user.isLogin?(console.log(V.state.user.isLogin),console.log("I`m in"),n()):(console.log(V.state.user.isLogin),console.log("No"),n("login"))}),100)}},{path:"/login",name:"login",component:function(){return n.e("chunk-e53edefc").then(n.bind(null,"a55b"))}}],Q=new d["a"]({routes:W}),X=Q;n("aede");K.a.defaults.baseURL="http://music.cpengx.cn/",a["default"].prototype.$http=K.a,a["default"].config.productionTip=!1,new a["default"]({router:X,store:V,render:function(t){return t(l)}}).$mount("#app")},"59a9":function(t,e,n){"use strict";n("2022")},7220:function(t,e,n){"use strict";n("2a5b")},7761:function(t,e,n){"use strict";n("9137")},"7fd8":function(t,e,n){"use strict";n("dadd")},"8e3d":function(t,e,n){},9137:function(t,e,n){},aede:function(t,e,n){},c727:function(t,e,n){"use strict";n("ea00")},cf92:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playController"},[n("div",{staticClass:"left",on:{click:function(e){t.isShowPlay=!0,t.updataLyric(),t.$emit("isPaused")}}},[n("img",{attrs:{src:t.playlist[t.playCurrentIndex].al.picUrl}}),n("div",{staticClass:"songDetail"},[n("div",{staticClass:"name"},[t._v(t._s(t.playlist[t.playCurrentIndex].name))]),n("div",{staticClass:"songWords"},[t._v("左右滑动切换")])])]),n("div",{staticClass:"right"},[n("svg",{directives:[{name:"show",rawName:"v-show",value:t.isPaused,expression:"isPaused"}],staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:t.play}},[n("use",{attrs:{"xlink:href":"#icon-bofang"}})]),n("svg",{directives:[{name:"show",rawName:"v-show",value:!t.isPaused,expression:"!isPaused"}],staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:t.play}},[n("use",{attrs:{"xlink:href":"#icon-zanting"}})]),n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-24gf-playlistMusic"}})])]),n("audio",{ref:"audio",attrs:{src:"https://music.163.com/song/media/outer/url?id="+t.playlist[t.playCurrentIndex].id+".mp3"}}),n("playMusic",{directives:[{name:"show",rawName:"v-show",value:t.isShowPlay,expression:"isShowPlay"}],attrs:{isPaused:t.isPaused,play:t.play,currentTime:t.currentTime},on:{back:function(e){t.isShowPlay=!1}}})],1)},i=[],s=n("5530"),r=n("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"playMusic"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.playlist[t.playCurrentIndex].al.picUrl}})]),a("div",{staticClass:"playTop"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.$emit("back")}}},[a("use",{attrs:{"xlink:href":"#icon-xiangxia"}})]),a("div",{staticClass:"center"},[a("div",{staticClass:"title"},[a("marquee",{attrs:{behavior:"srcoll",direction:"left",loop:"-1"}},[t._v(t._s(t.playlist[t.playCurrentIndex].al.name))])],1),a("div",{staticClass:"author"},[t._v(" "+t._s(t.playlist[t.playCurrentIndex].ar[0].name)+" ")])]),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-fenxiang-copy"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isLyric,expression:"isLyric"}],staticClass:"playContent"},[a("img",{staticClass:"citou",class:{active:!t.isPaused},attrs:{src:n("1aa6")}}),a("img",{staticClass:"diepian",attrs:{src:n("d62c")}}),a("img",{staticClass:"songPic",class:{picActive:!t.isPaused},attrs:{src:t.playlist[t.playCurrentIndex].al.picUrl}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLyric,expression:"!isLyric"}],ref:"playLyric",staticClass:"playLyric"},t._l(t.lyricCut,(function(e,n){return a("p",{key:n,class:{active:e.nextLyricTime>=t.currentTime&&e.time<=t.currentTime}},[t._v(" "+t._s(e.context)+" ")])})),0),a("div",{staticClass:"progress"}),a("div",{staticClass:"playFooter"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-xunhuan"}})]),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.goPlay(-1)}}},[a("use",{attrs:{"xlink:href":"#icon-shangyishoushangyige"}})]),a("svg",{directives:[{name:"show",rawName:"v-show",value:t.isPaused,expression:"isPaused"}],staticClass:"icon pause",attrs:{"aria-hidden":"true"},on:{click:t.play}},[a("use",{attrs:{"xlink:href":"#icon-bofang"}})]),a("svg",{directives:[{name:"show",rawName:"v-show",value:!t.isPaused,expression:"!isPaused"}],staticClass:"icon play",attrs:{"aria-hidden":"true"},on:{click:t.play}},[a("use",{attrs:{"xlink:href":"#icon-zanting"}})]),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.goPlay(1)}}},[a("use",{attrs:{"xlink:href":"#icon-xiayigexiayishou"}})]),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-bofangliebiao"}})])])])},o=[],u={props:["isPaused","play","currentTime"],data:function(){return{isLyric:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(r["d"])(["playlist","playCurrentIndex"])),Object(r["b"])(["lyricCut"])),methods:{goPlay:function(t){var e=this.playCurrentIndex+t;e<0?e=this.playlist.length-1:e==this.playlist.length&&(e=0),this.$store.commit("setPlayIndex",e),this.$store.dispatch("getLyric",{id:this.playlist[this.playCurrentIndex].id})}}},l=u,d=(n("c727"),n("2877")),p=Object(d["a"])(l,c,o,!1,null,"4be315ea",null),f=p.exports,h={data:function(){return{isPaused:!0,isShowPlay:!1,currentTime:0,IntervalId:""}},components:{playMusic:f},computed:Object(s["a"])({},Object(r["d"])(["playlist","playCurrentIndex"])),methods:{play:function(){this.$refs.audio.paused?(this.$refs.audio.play(),this.isPaused=!1,this.getCurrentTime()):(this.$refs.audio.pause(),this.isPaused=!0,clearInterval(this.IntervalId))},updataLyric:function(){this.$store.dispatch("getLyric",{id:this.playlist[this.playCurrentIndex].id})},getCurrentTime:function(){var t=this;this.IntervalId=setInterval((function(){t.currentTime=t.$refs.audio.currentTime}),1e3)}},beforeDestroy:function(){clearInterval(this.IntervalId)}},m=h,v=(n("59a9"),Object(d["a"])(m,a,i,!1,null,"3341346a",null));e["a"]=v.exports},d62c:function(t,e,n){t.exports=n.p+"img/disc-plus.b700b62e.png"},dadd:function(t,e,n){},ea00:function(t,e,n){}});
//# sourceMappingURL=app.60a3af31.js.map